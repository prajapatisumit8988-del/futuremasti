<!DOCTYPE html>
<html>
<head>
<title>Admin Panel - StudyMasti</title>
<style>
body{font-family:Arial;background:#f4f4f4}
.box{max-width:420px;margin:20px auto;background:#fff;padding:15px}
input,select,textarea,button{width:100%;margin:6px 0;padding:8px}
.item{border:1px solid #ccc;padding:8px;margin:8px 0}
.del{background:red;color:white;border:none;padding:6px}
</style>
</head>
<body>

<h2 style="text-align:center">‚öô Admin Panel</h2>

<div class="box">

<select id="cls">
<option value="class10">Class 10</option>
<option value="class12">Class 12</option>
<option value="upsc">UPSC</option>
</select>

<select id="sub">
<option value="math">Math</option>
<option value="science">Science</option>
<option value="history">History</option>
<option value="polity">Polity</option>
</select>

<select id="type">
<option value="videos">Video</option>
<option value="pdfs">PDF</option>
<option value="notes">Notes</option>
</select>

<input id="title" placeholder="Title">

<input id="yt" placeholder="YouTube ID (only video)">

<input id="link" placeholder="PDF Link">

<textarea id="text" placeholder="Notes Text"></textarea>

<button onclick="add()">‚ûï ADD</button>

</div>

<div class="box">
<h3>üìÇ Existing Content</h3>
<div id="list"></div>
</div>

<script type="module">
import { initializeApp } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyC-tawInUtP03jA7qiiodaR7b0M2wE0f4Y",
  authDomain: "futuremasti.firebaseapp.com",
  databaseURL: "https://futuremasti-default-rtdb.firebaseio.com",
  projectId: "futuremasti",
  storageBucket: "futuremasti.firebasestorage.app",
  messagingSenderId: "768228855414",
  appId: "1:768228855414:web:ef84c4ede75afe20b1d957"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

/* ‚ûï ADD CONTENT */
window.add = function(){
 push(ref(db,
  "content/"+cls.value+"/"+sub.value+"/"+type.value),{
   title:title.value,
   yt:yt.value,
   link:link.value,
   text:text.value
 });
 alert("Added ‚úî");
 title.value=yt.value=link.value=text.value="";
 load();
}

/* üìÇ LOAD + DELETE */
function load(){
 const path="content/"+cls.value+"/"+sub.value+"/"+type.value;
 onValue(ref(db,path),snap=>{
  list.innerHTML="";
  snap.forEach(c=>{
   let d=c.val();
   list.innerHTML+=`
    <div class="item">
     <b>${d.title}</b><br>
     <button class="del"
     onclick="del('${path}','${c.key}')">
     ‚ùå Delete</button>
    </div>`;
  });
 });
}
window.del=function(p,k){
 if(confirm("Delete?")){
  remove(ref(db,p+"/"+k));
 }
}

cls.onchange=sub.onchange=type.onchange=load;
load();

</script>

</body>
</html>
